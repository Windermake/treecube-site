<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ ‚Äî TreeCube</title>
  <meta name="description" content="–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ TreeCube" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="img\favicon.ico" type="image/x-icon">
  <style>
    @font-face {font-family: 'Minecraft';src: url('https://cdn.jsdelivr.net/npm/typeface-minecraft@0.0.1/files/minecraft.woff2') format('woff2');
    }
    :root {--bg: #060607;--card: #0f1113;--muted: #9aa6b2;--accent: #ff7a1c;--accent-2: #6bdcff;--glass: rgba(255, 255, 255, 0.03);--maxw: 1200px;}
    * {box-sizing: border-box;}
    html, body {height: 100%;margin: 0;font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;color: #e8eef6;background: linear-gradient(180deg, #050506 0%, #0f2233 100%);background-attachment: fixed;}
    a {color: inherit;text-decoration: none;}
    .NameMC {border-radius: 8px;}
    .nav {display: flex;align-items: center;justify-content: space-between;padding: 18px 24px;max-width: var(--maxw);margin: 0 auto;}
    .logo {display: flex;align-items: center;gap: 12px;cursor: pointer;}
    .logo img {height: 56px;image-rendering: pixelated;}
    .btn {background: transparent;border: 1px solid rgba(255, 255, 255, 0.06);padding: 8px 12px;border-radius: 8px;font-weight: 600;cursor: pointer;color: inherit;transition: all 0.2s;}
    .btn:hover {border-color: var(--accent-2);background: rgba(107, 220, 255, 0.05);}
    .btn.primary {background: linear-gradient(90deg, var(--accent), #ff9a3c);border: none;color: #0b0b0b;}
    .btn.primary:hover {opacity: 0.9;}
    .wrap {max-width: var(--maxw);margin: 28px auto;padding: 0 20px;}
    .cols {display: grid;grid-template-columns: 1fr 360px;gap: 22px;}
    @media (max-width: 980px) {.cols {grid-template-columns: 1fr;}}
    .panel {background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));padding: 24px;border-radius: 12px;border: 1px solid rgba(255, 255, 255, 0.03);box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);}
    .panel1 {margin-top: 10px;background: linear-gradient(180deg, rgba(221, 20, 20, 0.02), rgba(255, 255, 255, 0.01));padding: 7px;border-radius: 8px;border: 1px solid rgba(255, 255, 255, 0.03);}
    .profile-header {display: flex;align-items: center;gap: 20px;margin-bottom: 24px;flex-wrap: wrap;}
    .profile-avatar {width: 100px;height: 100px;border-radius: 12px;overflow: hidden;flex-shrink: 0;}
    .profile-avatar img {width: 100%;height: 100%;object-fit: cover;image-rendering: pixelated;}
    .profile-info h1 {margin: 0 0 8px;font-size: 32px;}
    .profile-role {color: var(--accent-2);font-weight: 600;font-size: 18px;margin-bottom: 8px;}
    .profile-realname {color: var(--muted);font-size: 16px;}
    .skin-actions {display: flex;gap: 10px;justify-content: center;flex-wrap: wrap;}
    .stats-grid {display: grid;grid-template-columns: repeat(2, 1fr);gap: 12px;margin-top: 20px;}
    .stat-item {padding: 12px;border-radius: 8px;background: rgba(255, 255, 255, 0.02);border: 1px solid rgba(255, 255, 255, 0.03);transition: all 0.2s;}
    .stat-item:hover {border-color: rgba(107, 220, 255, 0.1);background: rgba(107, 220, 255, 0.03);}
    .stat-label {color: var(--muted);font-size: 13px;margin-bottom: 4px;}
    .stat-value {font-weight: 700;font-size: 18px;}
    .videos-section {margin-top: 30px;}
    .videos-grid {display: grid;grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));gap: 16px;margin-top: 16px;}
    .video-item {border-radius: 10px;overflow: hidden;background: #000;transition: transform 0.2s, box-shadow 0.2s;border: 1px solid rgba(255, 255, 255, 0.05);}
    .video-item:hover {transform: translateY(-4px);box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);border-color: var(--accent-2);}
    .video-thumbnail {width: 100%;height: 140px;object-fit: cover;}
    .video-title {padding: 12px;font-weight: 600;color: #e8eef6;}
    .loading {display: flex;flex-direction: column;justify-content: center;align-items: center;min-height: 400px;font-size: 18px;color: var(--muted);gap: 20px;}
    .spinner {width: 40px;height: 40px;border: 4px solid rgba(107, 220, 255, 0.3);border-top: 4px solid var(--accent-2);border-radius: 50%;animation: spin 1s linear infinite;}
    @keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}
    .back-btn {display: inline-flex;align-items: center;gap: 8px;padding: 10px 16px;background: rgba(255, 255, 255, 0.03);border: 1px solid rgba(255, 255, 255, 0.06);border-radius: 8px;cursor: pointer;transition: all 0.2s;}
    .back-btn:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: var(--accent-2);}
    .error-container {text-align: center;padding: 60px 20px;max-width: 500px;margin: 0 auto;}
    @keyframes fadeIn {from { opacity: 0; transform: translateY(10px); }to { opacity: 1; transform: translateY(0); }}
    .fade-in {animation: fadeIn 0.3s ease-out;}
    .controls-info {display: flex;align-items: center;justify-content: center;gap: 8px;margin-top: 12px;color: var(--muted);font-size: 13px;}
    .control-item {display: flex;align-items: center;gap: 4px;padding: 4px 8px;background: rgba(255, 255, 255, 0.03);border-radius: 6px;}
    .social-links {display: flex;gap: 12px;margin-top: 16px;flex-wrap: wrap;}
    .social-link {display: flex;align-items: center;gap: 6px;padding: 8px 12px;background: rgba(255, 255, 255, 0.02);border: 1px solid rgba(255, 255, 255, 0.05);border-radius: 8px;transition: all 0.2s;}
    .social-link:hover {background: rgba(255, 122, 28, 0.1);border-color: var(--accent);}
    .merits-section {margin-top: 24px;padding: 16px;background: rgba(255, 255, 255, 0.01);border-radius: 8px;border: 1px solid rgba(255, 255, 255, 0.03);}
    .merits-title {color: var(--accent-2);font-weight: 600;margin-bottom: 12px;}
    .merits-content {color: var(--muted);line-height: 1.6;white-space: pre-line;}
    .youtube-channel {display: inline-flex;align-items: center;gap: 6px;padding: 6px 12px;background: rgba(255, 0, 0, 0.1);border: 1px solid rgba(255, 0, 0, 0.3);border-radius: 8px;color: #ff6b6b;margin-top: 8px;}
    .youtube-channel:hover {background: rgba(255, 0, 0, 0.2);border-color: #ff4444;}
    .left-panel {display: flex;flex-direction: column;gap: 22px;}
    .right-panel {position: sticky;top: 20px;height: fit-content;}
  </style>
</head>
<body>
  <nav class="nav">
    <div class="logo" onclick="window.location.href = 'index.html'">
      <img src="img/logo.PNG" alt="TC2 logo">
      <div>
        <div style="font-weight:800;font-size:18px">TreeCube</div>
        <div style="font-size:12px;color:var(--muted);margin-top:2px">–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞</div>
      </div>
    </div>
    <button class="btn" onclick="history.back()">‚Üê –ù–∞–∑–∞–¥</button>
  </nav>
  <main class="wrap">
    <div id="loading" class="loading">
      <div class="spinner"></div>
      <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...</div>
    </div>
    <div id="error" class="error-container" style="display: none;">
      <h2>–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω</h2>
      <p style="color: var(--muted); margin: 16px 0 24px;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –∏–ª–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é.</p>
      <button class="btn primary" onclick="window.location.href = 'index.html'">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
    </div>
    <div id="profile" class="cols fade-in" style="display: none;">
      <div class="left-panel">
        <div class="panel">
          <div class="profile-header">
            <div class="profile-avatar">
              <img id="avatar" alt="–ê–≤–∞—Ç–∞—Ä –∏–≥—Ä–æ–∫–∞">
            </div>
            <div class="profile-info">
              <h1 id="player-name"></h1>
              <div class="profile-role" id="player-role"></div>
              <div class="profile-realname" id="player-realname"></div>
              <div id="social-links" class="social-links">
              </div>
            </div>
          </div>

          <div id="player-about">
          </div>
          <div id="merits-section" class="merits-section" style="display: none;">
            <div class="merits-title">üèÜ –ó–∞—Å–ª—É–≥–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
            <div class="merits-content" id="player-merits"></div>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-label">–ù–∞ –ø—Ä–æ–µ–∫—Ç–µ</div>
              <div class="stat-value" id="player-season">‚Äî</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–†–æ–ª—å</div>
              <div class="stat-value" id="player-role-badge">–ò–≥—Ä–æ–∫</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–ù–∏–∫ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è</div>
              <div class="stat-value">
                <span id="player-nick-copy" style="cursor: pointer; color: var(--accent-2);" 
                      onclick="copyNick()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
              <div class="stat-value" id="player-activity">‚Äî</div>
            </div>
          </div>
        <div id="videos-section" class="panel videos-section" style="display: none;">
          <h2 style="margin: 0 0 16px;">üé¨ –í–∏–¥–µ–æ –∏–≥—Ä–æ–∫–∞</h2>
          <div id="videos-grid" class="videos-grid">
          </div>
        </div>

        <div id="contacts-section" class="panel" style="margin-top: 10%; display: none;">
          <h2 style="margin: 0 0 36px;">üîó –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Å—Å—ã–ª–∫–∏</h2>
          <div id="contacts-content">
          </div>
        </div>
      </div>

        <div class="right-panel">
          <div class="panel">
            <h3>üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <p style="color:var(--muted)">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞.</p>
            <p style="margin-top:12px;font-size:14px;color:var(--muted)">–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º.</p>

            <div id="namemc-link" class="panel1" style="display:none; cursor:pointer; margin-top:15px">
              <span>üë§</span> –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞ NameMC
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer style="margin-top: 40px; padding: 28px; text-align: center; color: var(--muted); opacity: 0.9;">
    ¬© TreeCube ‚Äî –ø—Ä–æ–µ–∫—Ç –∫–æ–Ω—Ç–µ–Ω—Ç‚Äë–º–µ–π–∫–µ—Ä–æ–≤. –ü—Ä–æ—Ñ–∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é.
  </footer>
  <script src="js\players-data.js"></script>
  <script>
    let currentPlayer = null;
    function getNickFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get('nick');
    }
    function findPlayer(nick) {
      if (typeof players === 'undefined') {
        console.error('–§–∞–π–ª players-data.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã—Ö');
        return null;
      }
      return players.find(p => p.nick === nick);
    }
    function initPage() {
      const nick = getNickFromURL();
      if (!nick) {
        showError();
        return;
      }

      currentPlayer = findPlayer(nick);
      if (!currentPlayer) {
        showError();
        return;
      }

      loadProfile();
    }
    function loadProfile() {
      const loadingEl = document.getElementById('loading');
      const profileEl = document.getElementById('profile');
      const errorEl = document.getElementById('error');
      
      loadingEl.style.display = 'none';
      errorEl.style.display = 'none';
      profileEl.style.display = 'grid';

      document.getElementById('player-name').textContent = currentPlayer.nick;
      document.getElementById('player-role').textContent = currentPlayer.role || '–ò–≥—Ä–æ–∫';
      document.getElementById('player-realname').textContent = currentPlayer.real ? `–ü—Ä–æ—â–µ: ${currentPlayer.real}` : '';
      document.getElementById('player-season').textContent = currentPlayer.season || '1';
      document.getElementById('player-role-badge').textContent = currentPlayer.role || '–ò–≥—Ä–æ–∫';
      document.getElementById('player-nick-copy').setAttribute('data-nick', currentPlayer.nick);

      document.getElementById('avatar').src = `https://mineskin.eu/helm/${encodeURIComponent(currentPlayer.nick)}/100.png`;
      document.getElementById('avatar').onerror = function() {
        this.src = `https://minotar.net/helm/${encodeURIComponent(currentPlayer.nick)}`;
      };
      const namemcLink = document.getElementById('namemc-link');
      namemcLink.style.display = 'block';
      namemcLink.onclick = function() {
        window.open(`https://namemc.com/profile/${encodeURIComponent(currentPlayer.nick)}`, '_blank');
      };
      const aboutEl = document.getElementById('player-about');
      aboutEl.innerHTML = `
        <h3 style="margin: 0 0 12px;">üìñ –û–± –∏–≥—Ä–æ–∫–µ</h3>
        <div style="color: var(--muted); line-height: 1.6; padding: 8px; background: rgba(255,255,255,0.01); border-radius: 8px;">
          ${currentPlayer.about || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–æ–∫–µ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞. –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é.'}
        </div>
      `;
      if (currentPlayer.merits && currentPlayer.merits.trim()) {
        const meritsSection = document.getElementById('merits-section');
        const meritsContent = document.getElementById('player-merits');
        meritsSection.style.display = 'block';
        meritsContent.textContent = currentPlayer.merits;
      }
      const socialLinksEl = document.getElementById('social-links');
      socialLinksEl.innerHTML = '';
      if (currentPlayer.twitch) {
        let twitchUrl = currentPlayer.twitch;
        if (twitchUrl.includes('twitch.tv')) {
          if (!twitchUrl.startsWith('http')) {
            const urlMatch = twitchUrl.match(/twitch\.tv\/\w+/);
            if (urlMatch) {
              twitchUrl = `https://${urlMatch[0]}`;
            }
          }
          const twitchLink = document.createElement('a');
          twitchLink.href = twitchUrl.startsWith('http') ? twitchUrl : `https://${twitchUrl}`;
          twitchLink.target = '_blank';
          twitchLink.className = 'social-link';
          twitchLink.innerHTML = '<span>üü£</span> Twitch';
          socialLinksEl.appendChild(twitchLink);
        }
      }
      if (currentPlayer.youtubeChannel) {
        const ytLink = document.createElement('a');
        ytLink.href = currentPlayer.youtubeChannel;
        ytLink.target = '_blank';
        ytLink.className = 'social-link';
        ytLink.innerHTML = '<span>üî¥</span> YouTube';
        socialLinksEl.appendChild(ytLink);
      }
      if (currentPlayer.videos && currentPlayer.videos.length > 0) {
        document.getElementById('videos-section').style.display = 'block';
        const videosGrid = document.getElementById('videos-grid');
        videosGrid.innerHTML = '';
        
        currentPlayer.videos.forEach((videoUrl, index) => {
          const videoEl = document.createElement('a');
          videoEl.href = videoUrl;
          videoEl.target = '_blank';
          videoEl.className = 'video-item';

          let thumbnail = '';
          if (videoUrl.includes('youtu.be/')) {
            const videoId = videoUrl.split('youtu.be/')[1].split('?')[0];
            thumbnail = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
          } else if (videoUrl.includes('youtube.com/watch?v=')) {
            const videoId = videoUrl.split('v=')[1].split('&')[0];
            thumbnail = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
          }
          
          videoEl.innerHTML = `
            <img src="${thumbnail || 'img/oblochki/default-video.jpg'}" alt="–í–∏–¥–µ–æ ${index + 1}" class="video-thumbnail" onerror="this.src='img/oblochki/default-video.jpg'">
            <div class="video-title">–í–∏–¥–µ–æ ${index + 1}</div>
          `;
          videosGrid.appendChild(videoEl);
        });
      }
      const contactsSection = document.getElementById('contacts-section');
      const contactsContent = document.getElementById('contacts-content');
      
      let contactsHTML = '';
      if (currentPlayer.twitch || currentPlayer.youtubeChannel) {
        contactsSection.style.display = 'block';
        
        if (currentPlayer.twitch && currentPlayer.twitch.includes('twitch.tv')) {
          contactsHTML += `<div style="margin-bottom: 12px;">
            <strong>Twitch:</strong> 
            <a href="${currentPlayer.twitch.startsWith('http') ? currentPlayer.twitch : 'https://' + currentPlayer.twitch}" target="_blank" style="color: var(--accent-2);">${currentPlayer.twitch}</a>
          </div>`;
        }
        
        if (currentPlayer.youtubeChannel) {
          contactsHTML += `<div style="margin-bottom: 12px;">
            <strong>YouTube:</strong> 
            <a href="${currentPlayer.youtubeChannel}" target="_blank" style="color: var(--accent-2);">${currentPlayer.youtubeChannel}</a>
          </div>`;
        }
        
        contactsContent.innerHTML = contactsHTML;
      }
    }
    function copyNick() {
      if (!currentPlayer) return;
      
      navigator.clipboard.writeText(currentPlayer.nick)
        .then(() => {
          showNotification('–ù–∏–∫ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
        })
        .catch(err => {
          console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:', err);
          showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å', true);
        });
    }
    function showNotification(message, isError = false) {
      const notification = document.createElement('div');
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${isError ? '#ff4444' : 'var(--card)'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        border: 1px solid ${isError ? '#ff4444' : 'rgba(107, 220, 255, 0.3)'};
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        z-index: 1000;
        animation: fadeIn 0.3s ease-out;
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'fadeIn 0.3s ease-out reverse';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }
    function showError() {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('error').style.display = 'block';
    }
    document.addEventListener('DOMContentLoaded', initPage);
  </script>
</body>
</html>